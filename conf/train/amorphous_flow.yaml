# Amorphous Flow Training Configuration
# 非晶碳 Flow Matching 训练配置

# 可重复性
deterministic: True
random_seed: 42

# 精度
float32_matmul_precision: medium  # medium|high

# ============================================================================
# Trainer Configuration
# ============================================================================
pl_trainer:
  fast_dev_run: False  # Debug 模式
  devices: 1
  accelerator: gpu
  precision: 32  # 32, 16-mixed, bf16-mixed
  max_epochs: ${data.train_max_epochs}
  accumulate_grad_batches: 1
  num_sanity_val_steps: 2
  gradient_clip_val: 1.0
  gradient_clip_algorithm: norm
  log_every_n_steps: 10

# ============================================================================
# Monitoring Configuration
# ============================================================================
monitor_metric: 'val_loss'
monitor_metric_mode: 'min'

# ============================================================================
# Early Stopping
# ============================================================================
early_stopping:
  patience: ${data.early_stopping_patience}
  verbose: True
  min_delta: 1e-5

# ============================================================================
# Model Checkpoints
# ============================================================================
model_checkpoints:
  save_top_k: 3
  verbose: True
  save_last: True
  filename: 'epoch={epoch:03d}-val_loss={val_loss:.4f}'
  auto_insert_metric_name: False
